const translations = {
  en: {
    'meta.title': 'Head Uksed - Custom Doors Tallinn | Door Restoration Estonia',
    'meta.description': 'Custom door manufacturing and restoration in Tallinn. Perfect for new homes and renovations. 45 years of master craftsmanship by Valentine Vesman. Free quotes!',
    'meta.keywords': 'custom doors Tallinn, door restoration Estonia, door repair Tallinn, wooden doors Estonia, entrance doors Tallinn, interior doors, new home doors',
    'og.title': 'Head Uksed - Custom Doors & Restoration in Tallinn, Estonia',
    'og.description': 'Expert custom door manufacturing and restoration in Tallinn. 45 years of master craftsmanship by Valentine Vesman. Perfect for new homes and renovations.',
    'hero.heading': 'Unique High-Quality Hand-Crafted <span class="gold-text">Doors, Stairs & Wooden Furniture</span>',
    'hero.description': 'Master Craftsman Valentine Vesman with 45 years of experience creates bespoke wooden pieces that transform your home.',
    'hero.cta': 'Get a Free Quote',
    'services.title': 'Our Expertise',
    'services.subtitle': 'Premium craftsmanship services backed by 45 years of master-level experience',
    'services.card1.title': 'New Custom Doors',
    'services.card1.desc': 'Custom manufacturing and installation of entrance, metal, and interior doors tailored to your specifications.',
    'services.card2.title': 'Door Restoration & Repair',
    'services.card2.desc': 'Complete refurbishment of old wooden and metal doors including insulation, lock replacement, and premium finishing.',
    'services.card3.title': 'Staircase Solutions',
    'services.card3.desc': 'Expert restoration, manufacturing, and installation of stairs and steps with precision craftsmanship.',
    'services.card4.title': 'Furniture Restoration',
    'services.card4.desc': 'Professional repair and restoration of all furniture pieces, bringing new life to treasured items.',
    'gallery.title': 'Our Work',
    'gallery.subtitle': 'A showcase of our master craftsmanship and attention to detail',
    'gallery.item1.title': 'Custom Staircase',
    'gallery.item1.desc': 'Elegant wooden staircase with precision craftsmanship',
    'gallery.item2.title': 'Furniture Restoration',
    'gallery.item2.desc': 'Expert restoration bringing antiques back to life',
    'gallery.item3.title': 'Door Restoration',
    'gallery.item3.desc': 'Premium finish on restored interior door',
    'gallery.item4.title': 'Exterior Door',
    'gallery.item4.desc': 'Professional exterior door craftsmanship',
    'gallery.item5.title': 'Exterior Door',
    'gallery.item5.desc': 'Expert exterior door installation',
    'gallery.item6.title': 'Exterior Door',
    'gallery.item6.desc': 'Quality exterior door work',
    'gallery.item7.title': 'Exterior Door',
    'gallery.item7.desc': 'Custom exterior door design',
    'gallery.item8.title': 'Exterior Door',
    'gallery.item8.desc': 'Premium exterior door craftsmanship',
    'gallery.item9.title': 'Interior Door',
    'gallery.item9.desc': 'Elegant interior door restoration',
    'gallery.item10.title': 'Interior Door',
    'gallery.item10.desc': 'Quality interior door work',
    'gallery.item11.title': 'Interior Door',
    'gallery.item11.desc': 'Professional interior door restoration',
    'about.title': 'About Head Uksed',
    'about.paragraph1': 'For over four decades, Master Craftsman Valentine Vesman has been delivering exceptional restoration and custom craftsmanship services. Our philosophy is simple: <span class="about-highlight">Don\'t replace - Restore and Save!</span>',
    'about.paragraph2': 'We specialize in breathing new life into doors, staircases, and furniture, combining traditional techniques with modern expertise to create work that stands the test of time and immediately increases your property value.',
    'features.item1.title': '45 Years Experience',
    'features.item1.desc': 'Led by Master Craftsman Valentine Vesman with unmatched expertise',
    'features.item2.title': 'Increase Property Value',
    'features.item2.desc': 'Quality restoration that immediately enhances your home\'s appeal',
    'features.item3.title': 'Quality Guarantee',
    'features.item3.desc': 'Master-level craftsmanship ensuring lasting value and durability',
    'contact.title': 'Get Your Free Quote',
    'contact.subtitle': 'Contact us today to discuss your restoration or custom craftsmanship needs',
    'contact.infoTitle': 'Contact Information',
    'contact.location': 'Estonia',
    'contact.whyTitle': 'Why Choose Us?',
    'contact.why1': '✓ 45 years of master-level experience',
    'contact.why2': '✓ Superior quality and lasting value',
    'contact.why3': '✓ Immediate property value increase',
    'contact.why4': '✓ Personalized service and attention',
    'form.name': 'Your Name *',
    'form.email': 'Your Email *',
    'form.phone': 'Your Phone Number',
    'form.message': 'Tell us about your project *',
    'form.submit': 'Request Free Quote',
    'form.errorTitle': 'Error',
    'form.validationIncomplete': 'Please fill in all required fields',
    'form.validationEmail': 'Please enter a valid email address',
    'form.sending': 'Sending...',
    'form.successTitle': 'Quote Request Sent!',
    'form.successDescription': 'We\'ll get back to you within 24 hours.',
    'footer.tagline': 'Master craftsmanship in restoration and custom woodwork for over 45 years.',
    'footer.linksTitle': 'Quick Links',
    'footer.linkServices': 'Services',
    'footer.linkGallery': 'Gallery',
    'footer.linkAbout': 'About Us',
    'footer.linkContact': 'Contact',
    'footer.contactTitle': 'Contact Us',
    'footer.rights': 'Head Uksed. All rights reserved.',
    'footer.signature': 'Master Craftsman Valentine Vesman - 45 Years of Excellence'
  },
  ru: {
    'meta.title': 'Head Uksed - Двери на заказ Таллинн | Реставрация дверей Эстония',
    'meta.description': 'Изготовление и реставрация дверей в Таллинне. Идеально для новых домов и ремонта. 45 лет мастерства Валентина Весмана. Бесплатные расчеты!',
    'meta.keywords': 'двери на заказ Таллинн, реставрация дверей Эстония, ремонт дверей Таллинн, деревянные двери, входные двери Таллинн, межкомнатные двери',
    'og.title': 'Head Uksed - Двери на заказ и реставрация в Таллинне, Эстония',
    'og.description': 'Профессиональное изготовление и реставрация дверей в Таллинне. 45 лет мастерства Валентина Весмана. Для новых домов и ремонта.',
    'hero.heading': 'Уникальные качественные ручной работы <span class="gold-text">двери, лестницы и деревянная мебель</span>',
    'hero.description': 'Мастер Валентин Весман с 45-летним опытом создает индивидуальные изделия из дерева, которые преображают ваш дом.',
    'hero.cta': 'Получить бесплатный расчет',
    'services.title': 'Наша экспертиза',
    'services.subtitle': 'Премиальные работы мастера с 45-летним опытом',
    'services.card1.title': 'Новые двери на заказ',
    'services.card1.desc': 'Изготовление и монтаж входных, металлических и межкомнатных дверей по вашим требованиям.',
    'services.card2.title': 'Реставрация и ремонт дверей',
    'services.card2.desc': 'Полное восстановление деревянных и металлических дверей: утепление, замена замков и премиальная отделка.',
    'services.card3.title': 'Решения для лестниц',
    'services.card3.desc': 'Профессиональная реставрация, изготовление и установка лестниц и ступеней с ювелирной точностью.',
    'services.card4.title': 'Реставрация мебели',
    'services.card4.desc': 'Профессиональный ремонт и реставрация любых предметов мебели, возвращающие им жизнь.',
    'gallery.title': 'Наши работы',
    'gallery.subtitle': 'Примеры мастерства и внимания к деталям',
    'gallery.item1.title': 'Лестница на заказ',
    'gallery.item1.desc': 'Элегантная деревянная лестница с точной подгонкой',
    'gallery.item2.title': 'Реставрация мебели',
    'gallery.item2.desc': 'Экспертное восстановление, возвращающее к жизни антиквариат',
    'gallery.item3.title': 'Реставрация двери',
    'gallery.item3.desc': 'Премиальная отделка восстановленной межкомнатной двери',
    'gallery.item4.title': 'Входная дверь',
    'gallery.item4.desc': 'Профессиональное изготовление входных дверей',
    'gallery.item5.title': 'Входная дверь',
    'gallery.item5.desc': 'Экспертная установка входных дверей',
    'gallery.item6.title': 'Входная дверь',
    'gallery.item6.desc': 'Качественная работа с входными дверями',
    'gallery.item7.title': 'Входная дверь',
    'gallery.item7.desc': 'Индивидуальный дизайн входных дверей',
    'gallery.item8.title': 'Входная дверь',
    'gallery.item8.desc': 'Премиальное качество входных дверей',
    'gallery.item9.title': 'Межкомнатная дверь',
    'gallery.item9.desc': 'Элегантная реставрация межкомнатных дверей',
    'gallery.item10.title': 'Межкомнатная дверь',
    'gallery.item10.desc': 'Качественная работа с межкомнатными дверями',
    'gallery.item11.title': 'Межкомнатная дверь',
    'gallery.item11.desc': 'Профессиональная реставрация межкомнатных дверей',
    'about.title': 'О компании Head Uksed',
    'about.paragraph1': 'Уже более четырех десятилетий мастер Валентин Весман предоставляет исключительные услуги по реставрации и индивидуальному изготовлению. Наша философия проста: <span class="about-highlight">Не заменяйте - реставрируйте и экономьте!</span>',
    'about.paragraph2': 'Мы вдохнем новую жизнь в двери, лестницы и мебель, сочетая традиционные техники с современным подходом, чтобы работа служила долго и увеличивала стоимость вашей недвижимости.',
    'features.item1.title': '45 лет опыта',
    'features.item1.desc': 'Под руководством мастера Валентина Весмана с непревзойденной экспертизой',
    'features.item2.title': 'Рост стоимости объекта',
    'features.item2.desc': 'Качественная реставрация, мгновенно улучшающая привлекательность вашего дома',
    'features.item3.title': 'Гарантия качества',
    'features.item3.desc': 'Мастерское исполнение, обеспечивающее долговечность и надежность',
    'contact.title': 'Получите бесплатный расчет',
    'contact.subtitle': 'Свяжитесь с нами, чтобы обсудить реставрацию или индивидуальные проекты',
    'contact.infoTitle': 'Контактная информация',
    'contact.location': 'Эстония',
    'contact.whyTitle': 'Почему выбирают нас?',
    'contact.why1': '✓ 45 лет мастерского опыта',
    'contact.why2': '✓ Высочайшее качество и долговечность',
    'contact.why3': '✓ Мгновенный рост стоимости недвижимости',
    'contact.why4': '✓ Персональный подход и внимание к деталям',
    'form.name': 'Ваше имя *',
    'form.email': 'Ваш e-mail *',
    'form.phone': 'Ваш телефон',
    'form.message': 'Расскажите о своем проекте *',
    'form.submit': 'Запросить расчет',
    'form.errorTitle': 'Ошибка',
    'form.validationIncomplete': 'Заполните все обязательные поля',
    'form.validationEmail': 'Введите корректный адрес электронной почты',
    'form.sending': 'Отправляем...',
    'form.successTitle': 'Заявка отправлена!',
    'form.successDescription': 'Мы свяжемся с вами в течение 24 часов.',
    'footer.tagline': 'Мастерская реставрация и индивидуальные изделия из дерева уже более 45 лет.',
    'footer.linksTitle': 'Быстрые ссылки',
    'footer.linkServices': 'Услуги',
    'footer.linkGallery': 'Галерея',
    'footer.linkAbout': 'О нас',
    'footer.linkContact': 'Контакт',
    'footer.contactTitle': 'Свяжитесь с нами',
    'footer.rights': 'Head Uksed. Все права защищены.',
    'footer.signature': 'Мастер Валентин Весман - 45 лет совершенства'
  },
  et: {
    'meta.title': 'Head Uksed - Eritellimusuksed Tallinn | Uste restaureerimine Eesti',
    'meta.description': 'Uste valmistamine ja restaureerimine Tallinnas. Ideaalne uutele kodudele ja renoveerimisele. 45 aastat meistritööd Valentine Vesman. Tasuta hinnapakkumised!',
    'meta.keywords': 'eritellimusuksed Tallinn, uste restaureerimine Eesti, ukse remont Tallinn, puituksed Eesti, sissepääsuuksed Tallinn, siseuksed, uue maja uksed',
    'og.title': 'Head Uksed - Eritellimusuksed ja restaureerimine Tallinnas, Eesti',
    'og.description': 'Professionaalne uste valmistamine ja restaureerimine Tallinnas. 45 aastat meistritööd Valentine Vesman. Uutele kodudele ja renoveerimisele.',
    'hero.heading': 'Ainulaadsed kvaliteetsed käsitsi valmistatud <span class="gold-text">uksed, trepid ja puidust mööbel</span>',
    'hero.description': 'Meistrimees Valentine Vesman 45-aastase kogemusega loob erilahenduslikud puidutooted, mis muudavad sinu kodu.',
    'hero.cta': 'Küsi tasuta pakkumist',
    'services.title': 'Meie oskused',
    'services.subtitle': '45-aastase kogemusega meistrite kõrgtasemel teenused',
    'services.card1.title': 'Uued eritellimusuksed',
    'services.card1.desc': 'Valmistame ja paigaldame sissepääsu-, metalli- ja siseuksi täpselt sinu soovide järgi.',
    'services.card2.title': 'Uste taastamine ja remont',
    'services.card2.desc': 'Puidust ja metalluste täielik uuendus: soojustus, lukkude vahetus ja esmaklassiline viimistlus.',
    'services.card3.title': 'Treppide lahendused',
    'services.card3.desc': 'Treppide ja astmete restaureerimine, tootmine ja paigaldus millimeetri täpsusega.',
    'services.card4.title': 'Mööbli restaureerimine',
    'services.card4.desc': 'Professionaalne mööbli parandamine ja taastamine, tuues lemmikesemed taas ellu.',
    'gallery.title': 'Meie tööd',
    'gallery.subtitle': 'Valik meie meistritöid ja detailset teostust',
    'gallery.item1.title': 'Eritrepp',
    'gallery.item1.desc': 'Elegantne puittrepp täpse käsitööga',
    'gallery.item2.title': 'Mööbli restaureerimine',
    'gallery.item2.desc': 'Asjatundlik taastamine, mis äratab antiigi ellu',
    'gallery.item3.title': 'Uste restaureerimine',
    'gallery.item3.desc': 'Luksuslik viimistlus taastatud siseuksel',
    'gallery.item4.title': 'Välisuks',
    'gallery.item4.desc': 'Professionaalne välisuste valmistamine',
    'gallery.item5.title': 'Välisuks',
    'gallery.item5.desc': 'Ekspertne välisuste paigaldus',
    'gallery.item6.title': 'Välisuks',
    'gallery.item6.desc': 'Kvaliteetne välisuste töötlemine',
    'gallery.item7.title': 'Välisuks',
    'gallery.item7.desc': 'Erilahendusega välisuks',
    'gallery.item8.title': 'Välisuks',
    'gallery.item8.desc': 'Tipptasemel välisuste meisterdamine',
    'gallery.item9.title': 'Siseuks',
    'gallery.item9.desc': 'Elegantne siseuste restaureerimine',
    'gallery.item10.title': 'Siseuks',
    'gallery.item10.desc': 'Kvaliteetne siseuste töötlemine',
    'gallery.item11.title': 'Siseuks',
    'gallery.item11.desc': 'Professionaalne siseuste restaureerimine',
    'about.title': 'Head Uksedist',
    'about.paragraph1': 'Juba üle nelja aastakümne on meistrimees Valentine Vesman pakkunud tipptasemel restaureerimis- ja eritöid. Meie põhimõte on lihtne: <span class="about-highlight">Ära vaheta - taasta ja säästa!</span>',
    'about.paragraph2': 'Anname uue elu ustele, treppidele ja mööblile, ühendades traditsioonilised võtted kaasaegse oskusteabega, et töö kestaks ja kasvataks sinu vara väärtust.',
    'features.item1.title': '45 aastat kogemust',
    'features.item1.desc': 'Meistrimees Valentine Vesman juhib töid võrreldamatu kogemusega',
    'features.item2.title': 'Tõsta kinnisvara väärtust',
    'features.item2.desc': 'Kvaliteetne restaureerimine, mis muudab kodu kohe atraktiivsemaks',
    'features.item3.title': 'Kvaliteedigarantii',
    'features.item3.desc': 'Meistritasemel teostus, mis peab vastu ja kestab',
    'contact.title': 'Küsi tasuta hinnapakkumist',
    'contact.subtitle': 'Võta ühendust, et arutada restaureerimis- või eritellimustöid',
    'contact.infoTitle': 'Kontaktinfo',
    'contact.location': 'Eesti',
    'contact.whyTitle': 'Miks valida meid?',
    'contact.why1': '✓ 45 aastat meistritasemel kogemust',
    'contact.why2': '✓ Tippkvaliteet ja püsiv väärtus',
    'contact.why3': '✓ Kiire kinnisvara väärtuse kasv',
    'contact.why4': '✓ Personaalne teenindus ja tähelepanu detailidele',
    'form.name': 'Sinu nimi *',
    'form.email': 'Sinu e-post *',
    'form.phone': 'Sinu telefon',
    'form.message': 'Kirjelda oma projekti *',
    'form.submit': 'Saada päring',
    'form.errorTitle': 'Viga',
    'form.validationIncomplete': 'Palun täida kõik kohustuslikud väljad',
    'form.validationEmail': 'Palun sisesta korrektne e-posti aadress',
    'form.sending': 'Saatmine...',
    'form.successTitle': 'Päring saadetud!',
    'form.successDescription': 'Võtame sinuga ühendust 24 tunni jooksul.',
    'footer.tagline': 'Meistritasemel restaureerimine ja eritööna puidutööd üle 45 aasta.',
    'footer.linksTitle': 'Kiirlingid',
    'footer.linkServices': 'Teenused',
    'footer.linkGallery': 'Galerii',
    'footer.linkAbout': 'Meist',
    'footer.linkContact': 'Kontakt',
    'footer.contactTitle': 'Võta ühendust',
    'footer.rights': 'Head Uksed. Kõik õigused kaitstud.',
    'footer.signature': 'Meistrimees Valentine Vesman - 45 aastat tipptaset'
  }
};

let currentLanguage = 'et';

// Smooth scroll functionality
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' });
  }
}

// Toast notification system
function showToast(title, description, type = 'success') {
  const existingToast = document.querySelector('.toast');
  if (existingToast) {
    existingToast.remove();
  }

  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <div class="toast-title">${title}</div>
    <div class="toast-description">${description}</div>
  `;

  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.animation = 'slideIn 0.3s ease-out reverse';
    setTimeout(() => toast.remove(), 300);
  }, 5000);
}

// Form validation and submission
function initContactForm() {
  const form = document.getElementById('contact-form');
  if (!form) return;

  form.addEventListener('submit', async function(e) {
    e.preventDefault();

    const formData = {
      name: document.getElementById('name').value.trim(),
      email: document.getElementById('email').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      message: document.getElementById('message').value.trim()
    };

    // Client-side validation
    if (!formData.name || !formData.email || !formData.message) {
      showToast(
        getTranslation('form.errorTitle'),
        getTranslation('form.validationIncomplete'),
        'error'
      );
      return;
    }

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(formData.email)) {
      showToast(
        getTranslation('form.errorTitle'),
        getTranslation('form.validationEmail'),
        'error'
      );
      return;
    }

    // Show sending state
    const submitBtn = form.querySelector('.btn-submit');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = getTranslation('form.sending');

    // Submit to Web3Forms
    try {
      const formDataObj = new FormData(form);
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formDataObj
      });

      const data = await response.json();

      if (data.success) {
        showToast(
          getTranslation('form.successTitle'),
          getTranslation('form.successDescription'),
          'success'
        );
        form.reset();
      } else {
        showToast(
          getTranslation('form.errorTitle'),
          'Something went wrong. Please try again or contact us directly.',
          'error'
        );
      }
    } catch (error) {
      showToast(
        getTranslation('form.errorTitle'),
        'Failed to send message. Please try again or contact us directly.',
        'error'
      );
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });
}

function initScrollTriggers() {
  const scrollButtons = document.querySelectorAll('[data-scroll]');
  scrollButtons.forEach(button => {
    button.addEventListener('click', function() {
      const target = this.getAttribute('data-scroll');
      scrollToSection(target);
    });
  });
}

function initLanguageSwitcher() {
  const languageSelect = document.querySelector('.language-select');
  if (languageSelect) {
    languageSelect.addEventListener('change', (event) => {
      const lang = event.target.value;
      if (lang !== currentLanguage) {
        setLanguage(lang);
      }
    });

    // Set initial value
    languageSelect.value = currentLanguage;
  }
}

function applyTranslations(lang) {
  const dictionary = translations[lang];
  if (!dictionary) return;

  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.dataset.i18n;
    const translation = dictionary[key];
    if (!translation) return;
    if (element.dataset.i18nType === 'html') {
      element.innerHTML = translation;
    } else {
      element.textContent = translation;
    }
  });

  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.dataset.i18nPlaceholder;
    const translation = dictionary[key];
    if (translation) {
      element.setAttribute('placeholder', translation);
    }
  });

  document.querySelectorAll('[data-i18n-content]').forEach(element => {
    const key = element.dataset.i18nContent;
    const translation = dictionary[key];
    if (translation) {
      element.setAttribute('content', translation);
    }
  });

  // Update page title
  document.title = dictionary['meta.title'] || document.title;

  // Update meta description
  const metaDesc = document.querySelector('meta[name="description"]');
  if (metaDesc && dictionary['meta.description']) {
    metaDesc.setAttribute('content', dictionary['meta.description']);
  }

  // Update meta keywords
  const metaKeywords = document.querySelector('meta[name="keywords"]');
  if (metaKeywords && dictionary['meta.keywords']) {
    metaKeywords.setAttribute('content', dictionary['meta.keywords']);
  }

  // Update Open Graph tags
  const ogTitle = document.querySelector('meta[property="og:title"]');
  if (ogTitle && dictionary['og.title']) {
    ogTitle.setAttribute('content', dictionary['og.title']);
  }

  const ogDesc = document.querySelector('meta[property="og:description"]');
  if (ogDesc && dictionary['og.description']) {
    ogDesc.setAttribute('content', dictionary['og.description']);
  }

  // Update Twitter card tags
  const twitterTitle = document.querySelector('meta[name="twitter:title"]');
  if (twitterTitle && dictionary['og.title']) {
    twitterTitle.setAttribute('content', dictionary['og.title']);
  }

  const twitterDesc = document.querySelector('meta[name="twitter:description"]');
  if (twitterDesc && dictionary['og.description']) {
    twitterDesc.setAttribute('content', dictionary['og.description']);
  }
}

function setLanguage(lang) {
  if (!translations[lang]) {
    return;
  }
  currentLanguage = lang;
  document.documentElement.lang = lang;
  applyTranslations(lang);
  updateLanguageButtons(lang);
  updateYear();
  saveLanguagePreference(lang);
}

function updateLanguageButtons(lang) {
  const languageSelect = document.querySelector('.language-select');
  if (languageSelect) {
    languageSelect.value = lang;
  }
}

function updateYear() {
  const yearElement = document.getElementById('year');
  if (yearElement) {
    yearElement.textContent = new Date().getFullYear();
  }
}

function saveLanguagePreference(lang) {
  try {
    localStorage.setItem('preferredLanguage', lang);
  } catch (error) {
    // Ignore storage errors
  }
}

function getSavedLanguage() {
  try {
    return localStorage.getItem('preferredLanguage');
  } catch (error) {
    return null;
  }
}

function getTranslation(key, lang = currentLanguage) {
  const dictionary = translations[lang] || {};
  return dictionary[key] || translations.en[key] || key;
}

// Initialize all functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM Content Loaded');
  console.log('Current language:', currentLanguage);

  initContactForm();
  initScrollTriggers();
  initLanguageSwitcher();
  initGalleryNavigation();

  const savedLanguage = getSavedLanguage();
  console.log('Saved language:', savedLanguage);

  if (savedLanguage && translations[savedLanguage]) {
    setLanguage(savedLanguage);
  } else {
    setLanguage('et');
  }

  console.log('Initialization complete. Current language:', currentLanguage);
});

// Gallery navigation
function initGalleryNavigation() {
  const galleryGrid = document.querySelector('.gallery-grid');
  const galleryWrapper = document.querySelector('.gallery-wrapper');
  const navLeft = document.querySelector('.gallery-nav-left');
  const navRight = document.querySelector('.gallery-nav-right');

  if (!galleryGrid || !galleryWrapper || !navLeft || !navRight) return;

  const scrollAmount = 420; // Width of one item (400px) + gap (20px)

  navLeft.addEventListener('click', () => {
    galleryGrid.scrollBy({
      left: -scrollAmount,
      behavior: 'smooth'
    });
  });

  navRight.addEventListener('click', () => {
    galleryGrid.scrollBy({
      left: scrollAmount,
      behavior: 'smooth'
    });
  });

  // Update button visibility and gradients based on scroll position
  function updateNavButtons() {
    const isAtStart = galleryGrid.scrollLeft <= 10;
    const isAtEnd = galleryGrid.scrollLeft >= galleryGrid.scrollWidth - galleryGrid.clientWidth - 10;

    // Update navigation buttons
    navLeft.style.opacity = isAtStart ? '0.3' : '1';
    navLeft.style.pointerEvents = isAtStart ? 'none' : 'auto';
    navRight.style.opacity = isAtEnd ? '0.3' : '1';
    navRight.style.pointerEvents = isAtEnd ? 'none' : 'auto';

    // Update gradient masks visibility via CSS class on wrapper
    if (isAtStart) {
      galleryWrapper.classList.add('at-start');
    } else {
      galleryWrapper.classList.remove('at-start');
    }

    if (isAtEnd) {
      galleryWrapper.classList.add('at-end');
    } else {
      galleryWrapper.classList.remove('at-end');
    }
  }

  galleryGrid.addEventListener('scroll', updateNavButtons);
  updateNavButtons(); // Initial update
}

// SVG Icons as inline strings
const icons = {
  phone: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>',
  mail: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>',
  mapPin: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>',
  doorOpen: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 4h3a2 2 0 0 1 2 2v14"></path><path d="M2 20h3"></path><path d="M13 20h9"></path><path d="M10 12v.01"></path><path d="M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"></path></svg>',
  hammer: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"></path><path d="M17.64 15 22 10.64"></path><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91"></path></svg>',
  settings: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>',
  armchair: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"></path><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z"></path><path d="M5 18v2"></path><path d="M19 18v2"></path></svg>',
  award: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="6"></circle><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"></path></svg>',
  trendingUp: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg>',
  shield: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"></path></svg>'
};
